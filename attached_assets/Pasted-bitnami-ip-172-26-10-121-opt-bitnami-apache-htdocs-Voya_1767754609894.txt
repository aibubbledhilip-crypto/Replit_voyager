bitnami@ip-172-26-10-121:/opt/bitnami/apache/htdocs/VoyagerAthena$ grep "button-load-query" /opt/bitnami/apache/htdocs/VoyagerAthena/client/src/components/QueryBuilder.tsx
              <Button variant="outline" data-testid="button-load-query">
bitnami@ip-172-26-10-121:/opt/bitnami/apache/htdocs/VoyagerAthena$ grep "button-load-query" /opt/bitnami/apache/htdocs/VoyagerAthena/dist/public/assets/index-Dqn5cFGF.js
      relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full`,e),...t}));NT.displayName=kT.displayName;const bT=y.forwardRef(({className:e,...t},r)=>u.jsx(CT,{ref:r,className:pe("aspect-square h-full w-full",e),...t}));bT.displayName=CT.displayName;const FT=y.forwardRef(({className:e,...t},r)=>u.jsx(AT,{ref:r,className:pe("flex h-full w-full items-center justify-center rounded-full bg-muted",e),...t}));FT.displayName=AT.displayName;var XD=y.createContext(void 0);function Po(e){const t=y.useContext(XD);return e||t||"ltr"}var Dd="rovingFocusGroup.onEntryFocus",YD={bubbles:!1,cancelable:!0},_0="RovingFocusGroup",[fp,RT,QD]=o0(_0),[qD,Oo]=yr(_0,[QD]),[JD,ZD]=qD(_0),PT=y.forwardRef((e,t)=>u.jsx(fp.Provider,{scope:e.__scopeRovingFocusGroup,children:u.jsx(fp.Slot,{scope:e.__scopeRovingFocusGroup,children:u.jsx(eI,{...e,ref:t})})}));PT.displayName=_0;var eI=y.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,orientation:n,loop:a=!1,dir:s,currentTabStopId:i,defaultCurrentTabStopId:o,onCurrentTabStopIdChange:l,onEntryFocus:c,preventScrollOnEntryFocus:f=!1,...d}=e,h=y.useRef(null),m=Oe(t,h),v=Po(s),[p=null,x]=zn({prop:i,defaultProp:o,onChange:l}),[w,E]=y.useState(!1),g=at(c),S=RT(r),C=y.useRef(!1),[A,T]=y.useState(0);return y.useEffect(()=>{const O=h.current;if(O)return O.addEventListener(Dd,g),()=>O.removeEventListener(Dd,g)},[g]),u.jsx(JD,{scope:r,orientation:n,dir:v,loop:a,currentTabStopId:p,onItemFocus:y.useCallback(O=>x(O),[x]),onItemShiftTab:y.useCallback(()=>E(!0),[]),onFocusableItemAdd:y.useCallback(()=>T(O=>O+1),[]),onFocusableItemRemove:y.useCallback(()=>T(O=>O-1),[]),children:u.jsx(Ee.div,{tabIndex:w||A===0?-1:0,"data-orientation":n,...d,ref:m,style:{outline:"none",...e.style},onMouseDown:de(e.onMouseDown,()=>{C.current=!0}),onFocus:de(e.onFocus,O=>{const R=!C.current;if(O.target===O.currentTarget&&R&&!w){const _=new CustomEvent(Dd,YD);if(O.currentTarget.dispatchEvent(_),!_.defaultPrevented){const F=S().filter(ee=>ee.focusable),b=F.find(ee=>ee.active),W=F.find(ee=>ee.id===p),te=[b,W,...F].filter(Boolean).map(ee=>ee.ref.current);IT(te,f)}}C.current=!1}),onBlur:de(e.onBlur,()=>E(!1))})})}),OT="RovingFocusGroupItem",DT=y.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,focusable:n=!0,active:a=!1,tabStopId:s,...i}=e,o=en(),l=s||o,c=ZD(OT,r),f=c.currentTabStopId===l,d=RT(r),{onFocusableItemAdd:h,onFocusableItemRemove:m}=c;return y.useEffect(()=>{if(n)return h(),()=>m()},[n,h,m]),u.jsx(fp.ItemSlot,{scope:r,id:l,focusable:n,active:a,children:u.jsx(Ee.span,{tabIndex:f?0:-1,"data-orientation":c.orientation,...i,ref:t,onMouseDown:de(e.onMouseDown,v=>{n?c.onItemFocus(l):v.preventDefault()}),onFocus:de(e.onFocus,()=>c.onItemFocus(l)),onKeyDown:de(e.onKeyDown,v=>{if(v.key==="Tab"&&v.shiftKey){c.onItemShiftTab();return}if(v.target!==v.currentTarget)return;const p=nI(v,c.orientation,c.dir);if(p!==void 0){if(v.metaKey||v.ctrlKey||v.altKey||v.shiftKey)return;v.preventDefault();let w=d().filter(E=>E.focusable).map(E=>E.ref.current);if(p==="last")w.reverse();else if(p==="prev"||p==="next"){p==="prev"&&w.reverse();const E=w.indexOf(v.currentTarget);w=c.loop?aI(w,E+1):w.slice(E+1)}setTimeout(()=>IT(w))}})})})});DT.displayName=OT;var tI={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function rI(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function nI(e,t,r){const n=rI(e.key,r);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return tI[n]}function IT(e,t=!1){const r=document.activeElement;for(const n of e)if(n===r||(n.focus({preventScroll:t}),document.activeElement!==r))return}function aI(e,t){return e.map((r,n)=>e[(t+n)%e.length])}var lx=PT,cx=DT,dp=["Enter"," "],sI=["ArrowDown","PageUp","Home"],MT=["ArrowUp","PageDown","End"],iI=[...sI,...MT],oI={ltr:[...dp,"ArrowRight"],rtl:[...dp,"ArrowLeft"]},lI={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Fc="Menu",[ec,cI,uI]=o0(Fc),[li,jT]=yr(Fc,[uI,Ro,Oo]),k0=Ro(),LT=Oo(),[fI,ci]=li(Fc),[dI,Rc]=li(Fc),BT=e=>{const{__scopeMenu:t,open:r=!1,children:n,dir:a,onOpenChange:s,modal:i=!0}=e,o=k0(t),[l,c]=y.useState(null),f=y.useRef(!1),d=at(s),h=Po(a);return y.useEffect(()=>{const m=()=>{f.current=!0,document.addEventListener("pointerdown",v,{capture:!0,once:!0}),document.addEventListener("pointermove",v,{capture:!0,once:!0})},v=()=>f.current=!1;return document.addEventListener("keydown",m,{capture:!0}),()=>{document.removeEventListener("keydown",m,{capture:!0}),document.removeEventListener("pointerdown",v,{capture:!0}),document.removeEventListener("pointermove",v,{capture:!0})}},[]),u.jsx(Ym,{...o,children:u.jsx(fI,{scope:t,open:r,onOpenChange:d,content:l,onContentChange:c,children:u.jsx(dI,{scope:t,onClose:y.useCallback(()=>d(!1),[d]),isUsingKeyboardRef:f,dir:h,modal:i,children:n})})})};BT.displayName=Fc;var hI="MenuAnchor",ux=y.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e,a=k0(r);return u.jsx(Qm,{...a,...n,ref:t})});ux.displayName=hI;var fx="MenuPortal",[pI,UT]=li(fx,{forceMount:void 0}),$T=e=>{const{__scopeMenu:t,forceMount:r,children:n,container:a}=e,s=ci(fx,t);return u.jsx(pI,{scope:t,forceMount:r,children:u.jsx(Gt,{present:r||s.open,children:u.jsx(Cc,{asChild:!0,container:a,children:n})})})};$T.displayName=fx;var tn="MenuContent",[mI,dx]=li(tn),HT=y.forwardRef((e,t)=>{const r=UT(tn,e.__scopeMenu),{forceMount:n=r.forceMount,...a}=e,s=ci(tn,e.__scopeMenu),i=Rc(tn,e.__scopeMenu);return u.jsx(ec.Provider,{scope:e.__scopeMenu,children:u.jsx(Gt,{present:n||s.open,children:u.jsx(ec.Slot,{scope:e.__scopeMenu,children:i.modal?u.jsx(xI,{...a,ref:t}):u.jsx(vI,{...a,ref:t})})})})}),xI=y.forwardRef((e,t)=>{const r=ci(tn,e.__scopeMenu),n=y.useRef(null),a=Oe(t,n);return y.useEffect(()=>{const s=n.current;if(s)return tx(s)},[]),u.jsx(hx,{...e,ref:a,trapFocus:r.open,disableOutsidePointerEvents:r.open,disableOutsideScroll:!0,onFocusOutside:de(e.onFocusOutside,s=>s.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>r.onOpenChange(!1)})}),vI=y.forwardRef((e,t)=>{const r=ci(tn,e.__scopeMenu);return u.jsx(hx,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>r.onOpenChange(!1)})}),gI=Ys("MenuContent.ScrollLock"),hx=y.forwardRef((e,t)=>{const{__scopeMenu:r,loop:n=!1,trapFocus:a,onOpenAutoFocus:s,onCloseAutoFocus:i,disableOutsidePointerEvents:o,onEntryFocus:l,onEscapeKeyDown:c,onPointerDownOutside:f,onFocusOutside:d,onInteractOutside:h,onDismiss:m,disableOutsideScroll:v,...p}=e,x=ci(tn,r),w=Rc(tn,r),E=k0(r),g=LT(r),S=cI(r),[C,A]=y.useState(null),T=y.useRef(null),O=Oe(t,T,x.onContentChange),R=y.useRef(0),_=y.useRef(""),F=y.useRef(0),b=y.useRef(null),W=y.useRef("right"),G=y.useRef(0),te=v?y0:y.Fragment,ee=v?{as:gI,allowPinchZoom:!0}:void 0,se=M=>{var J,oe;const ne=_.current+M,le=S().filter(ie=>!ie.disabled),N=document.activeElement,z=(J=le.find(ie=>ie.ref.current===N))==null?void 0:J.textValue,U=le.map(ie=>ie.textValue),V=FI(U,ne,z),Z=(oe=le.find(ie=>ie.textValue===V))==null?void 0:oe.ref.current;(function ie(re){_.current=re,window.clearTimeout(R.current),re!==""&&(R.current=window.setTimeout(()=>ie(""),1e3))})(ne),Z&&setTimeout(()=>Z.focus())};y.useEffect(()=>()=>window.clearTimeout(R.current),[]),ex();const K=y.useCallback(M=>{var le,N;return W.current===((le=b.current)==null?void 0:le.side)&&PI(M,(N=b.current)==null?void 0:N.area)},[]);return u.jsx(mI,{scope:r,searchRef:_,onItemEnter:y.useCallback(M=>{K(M)&&M.preventDefault()},[K]),onItemLeave:y.useCallback(M=>{var ne;K(M)||((ne=T.current)==null||ne.focus(),A(null))},[K]),onTriggerLeave:y.useCallback(M=>{K(M)&&M.preventDefault()},[K]),pointerGraceTimerRef:F,onPointerGraceIntentChange:y.useCallback(M=>{b.current=M},[]),children:u.jsx(te,{...ee,children:u.jsx(v0,{asChild:!0,trapped:a,onMountAutoFocus:de(s,M=>{var ne;M.preventDefault(),(ne=T.current)==null||ne.focus({preventScroll:!0})}),onUnmountAutoFocus:i,children:u.jsx(Co,{asChild:!0,disableOutsidePointerEvents:o,onEscapeKeyDown:c,onPointerDownOutside:f,onFocusOutside:d,onInteractOutside:h,onDismiss:m,children:u.jsx(lx,{asChild:!0,...g,dir:w.dir,orientation:"vertical",loop:n,currentTabStopId:C,onCurrentTabStopIdChange:A,onEntryFocus:de(l,M=>{w.isUsingKeyboardRef.current||M.preventDefault()}),preventScrollOnEntryFocus:!0,children:u.jsx(qm,{role:"menu","aria-orientation":"vertical","data-state":a_(x.open),"data-radix-menu-content":"",dir:w.dir,...E,...p,ref:O,style:{outline:"none",...p.style},onKeyDown:de(p.onKeyDown,M=>{const le=M.target.closest("[data-radix-menu-content]")===M.currentTarget,N=M.ctrlKey||M.altKey||M.metaKey,z=M.key.length===1;le&&(M.key==="Tab"&&M.preventDefault(),!N&&z&&se(M.key));const U=T.current;if(M.target!==U||!iI.includes(M.key))return;M.preventDefault();const Z=S().filter(J=>!J.disabled).map(J=>J.ref.current);MT.includes(M.key)&&Z.reverse(),NI(Z)}),onBlur:de(e.onBlur,M=>{M.currentTarget.contains(M.target)||(window.clearTimeout(R.current),_.current="")}),onPointerMove:de(e.onPointerMove,tc(M=>{const ne=M.target,le=G.current!==M.clientX;if(M.currentTarget.contains(ne)&&le){const N=M.clientX>G.current?"right":"left";W.current=N,G.current=M.clientX}}))})})})})})})});HT.displayName=tn;var yI="MenuGroup",px=y.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e;return u.jsx(Ee.div,{role:"group",...n,ref:t})});px.displayName=yI;var wI="MenuLabel",VT=y.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e;return u.jsx(Ee.div,{...n,ref:t})});VT.displayName=wI;var _f="MenuItem",pg="menu.itemSelect",C0=y.forwardRef((e,t)=>{const{disabled:r=!1,onSelect:n,...a}=e,s=y.useRef(null),i=Rc(_f,e.__scopeMenu),o=dx(_f,e.__scopeMenu),l=Oe(t,s),c=y.useRef(!1),f=()=>{const d=s.current;if(!r&&d){const h=new CustomEvent(pg,{bubbles:!0,cancelable:!0});d.addEventListener(pg,m=>n==null?void 0:n(m),{once:!0}),Om(d,h),h.defaultPrevented?c.current=!1:i.onClose()}};return u.jsx(zT,{...a,ref:l,disabled:r,onClick:de(e.onClick,f),onPointerDown:d=>{var h;(h=e.onPointerDown)==null||h.call(e,d),c.current=!0},onPointerUp:de(e.onPointerUp,d=>{var h;c.current||(h=d.currentTarget)==null||h.click()}),onKeyDown:de(e.onKeyDown,d=>{const h=o.searchRef.current!=="";r||h&&d.key===" "||dp.includes(d.key)&&(d.currentTarget.click(),d.preventDefault())})})});C0.displayName=_f;var zT=y.forwardRef((e,t)=>{const{__scopeMenu:r,disabled:n=!1,textValue:a,...s}=e,i=dx(_f,r),o=LT(r),l=y.useRef(null),c=Oe(t,l),[f,d]=y.useState(!1),[h,m]=y.useState("");return y.useEffect(()=>{const v=l.current;v&&m((v.textContent??"").trim())},[s.children]),u.jsx(ec.ItemSlot,{scope:r,disabled:n,textValue:a??h,children:u.jsx(cx,{asChild:!0,...o,focusable:!n,children:u.jsx(Ee.div,{role:"menuitem","data-highlighted":f?"":void 0,"aria-disabled":n||void 0,"data-disabled":n?"":void 0,...s,ref:c,onPointerMove:de(e.onPointerMove,tc(v=>{n?i.onItemLeave(v):(i.onItemEnter(v),v.defaultPrevented||v.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:de(e.onPointerLeave,tc(v=>i.onItemLeave(v))),onFocus:de(e.onFocus,()=>d(!0)),onBlur:de(e.onBlur,()=>d(!1))})})})}),EI="MenuCheckboxItem",WT=y.forwardRef((e,t)=>{const{checked:r=!1,onCheckedChange:n,...a}=e;return u.jsx(QT,{scope:e.__scopeMenu,checked:r,children:u.jsx(C0,{role:"menuitemcheckbox","aria-checked":kf(r)?"mixed":r,...a,ref:t,"data-state":xx(r),onSelect:de(a.onSelect,()=>n==null?void 0:n(kf(r)?!0:!r),{checkForDefaultPrevented:!1})})})});WT.displayName=EI;var GT="MenuRadioGroup",[SI,TI]=li(GT,{value:void 0,onValueChange:()=>{}}),KT=y.forwardRef((e,t)=>{const{value:r,onValueChange:n,...a}=e,s=at(n);return u.jsx(SI,{scope:e.__scopeMenu,value:r,onValueChange:s,children:u.jsx(px,{...a,ref:t})})});KT.displayName=GT;var XT="MenuRadioItem",YT=y.forwardRef((e,t)=>{const{value:r,...n}=e,a=TI(XT,e.__scopeMenu),s=r===a.value;return u.jsx(QT,{scope:e.__scopeMenu,checked:s,children:u.jsx(C0,{role:"menuitemradio","aria-checked":s,...n,ref:t,"data-state":xx(s),onSelect:de(n.onSelect,()=>{var i;return(i=a.onValueChange)==null?void 0:i.call(a,r)},{checkForDefaultPrevented:!1})})})});YT.displayName=XT;var mx="MenuItemIndicator",[QT,_I]=li(mx,{checked:!1}),qT=y.forwardRef((e,t)=>{const{__scopeMenu:r,forceMount:n,...a}=e,s=_I(mx,r);return u.jsx(Gt,{present:n||kf(s.checked)||s.checked===!0,children:u.jsx(Ee.span,{...a,ref:t,"data-state":xx(s.checked)})})});qT.displayName=mx;var kI="MenuSeparator",JT=y.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e;return u.jsx(Ee.div,{role:"separator","aria-orientation":"horizontal",...n,ref:t})});JT.displayName=kI;var CI="MenuArrow",ZT=y.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e,a=k0(r);return u.jsx(Jm,{...a,...n,ref:t})});ZT.displayName=CI;var AI="MenuSub",[oH,e_]=li(AI),ol="MenuSubTrigger",t_=y.forwardRef((e,t)=>{const r=ci(ol,e.__scopeMenu),n=Rc(ol,e.__scopeMenu),a=e_(ol,e.__scopeMenu),s=dx(ol,e.__scopeMenu),i=y.useRef(null),{pointerGraceTimerRef:o,onPointerGraceIntentChange:l}=s,c={__scopeMenu:e.__scopeMenu},f=y.useCallback(()=>{i.current&&window.clearTimeout(i.current),i.current=null},[]);return y.useEffect(()=>f,[f]),y.useEffect(()=>{const d=o.current;return()=>{window.clearTimeout(d),l(null)}},[o,l]),u.jsx(ux,{asChild:!0,...c,children:u.jsx(zT,{id:a.triggerId,"aria-haspopup":"menu","aria-expanded":r.open,"aria-controls":a.contentId,"data-state":a_(r.open),...e,ref:i0(t,a.onTriggerChange),onClick:d=>{var h;(h=e.onClick)==null||h.call(e,d),!(e.disabled||d.defaultPrevented)&&(d.currentTarget.focus(),r.open||r.onOpenChange(!0))},onPointerMove:de(e.onPointerMove,tc(d=>{s.onItemEnter(d),!d.defaultPrevented&&!e.disabled&&!r.open&&!i.current&&(s.onPointerGraceIntentChange(null),i.current=window.setTimeout(()=>{r.onOpenChange(!0),f()},100))})),onPointerLeave:de(e.onPointerLeave,tc(d=>{var m,v;f();const h=(m=r.content)==null?void 0:m.getBoundingClientRect();if(h){const p=(v=r.content)==null?void 0:v.dataset.side,x=p==="right",w=x?-5:5,E=h[x?"left":"right"],g=h[x?"right":"left"];s.onPointerGraceIntentChange({area:[{x:d.clientX+w,y:d.clientY},{x:E,y:h.top},{x:g,y:h.top},{x:g,y:h.bottom},{x:E,y:h.bottom}],side:p}),window.clearTimeout(o.current),o.current=window.setTimeout(()=>s.onPointerGraceIntentChange(null),300)}else{if(s.onTriggerLeave(d),d.defaultPrevented)return;s.onPointerGraceIntentChange(null)}})),onKeyDown:de(e.onKeyDown,d=>{var m;const h=s.searchRef.current!=="";e.disabled||h&&d.key===" "||oI[n.dir].includes(d.key)&&(r.onOpenChange(!0),(m=r.content)==null||m.focus(),d.preventDefault())})})})});t_.displayName=ol;var r_="MenuSubContent",n_=y.forwardRef((e,t)=>{const r=UT(tn,e.__scopeMenu),{forceMount:n=r.forceMount,...a}=e,s=ci(tn,e.__scopeMenu),i=Rc(tn,e.__scopeMenu),o=e_(r_,e.__scopeMenu),l=y.useRef(null),c=Oe(t,l);return u.jsx(ec.Provider,{scope:e.__scopeMenu,children:u.jsx(Gt,{present:n||s.open,children:u.jsx(ec.Slot,{scope:e.__scopeMenu,children:u.jsx(hx,{id:o.contentId,"aria-labelledby":o.triggerId,...a,ref:c,align:"start",side:i.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:f=>{var d;i.isUsingKeyboardRef.current&&((d=l.current)==null||d.focus()),f.preventDefault()},onCloseAutoFocus:f=>f.preventDefault(),onFocusOutside:de(e.onFocusOutside,f=>{f.target!==o.trigger&&s.onOpenChange(!1)}),onEscapeKeyDown:de(e.onEscapeKeyDown,f=>{i.onClose(),f.preventDefault()}),onKeyDown:de(e.onKeyDown,f=>{var m;const d=f.currentTarget.contains(f.target),h=lI[i.dir].includes(f.key);d&&h&&(s.onOpenChange(!1),(m=o.trigger)==null||m.focus(),f.preventDefault())})})})})})});n_.displayName=r_;function a_(e){return e?"open":"closed"}function kf(e){return e==="indeterminate"}function xx(e){return kf(e)?"indeterminate":e?"checked":"unchecked"}function NI(e){const t=document.activeElement;for(const r of e)if(r===t||(r.focus(),document.activeElement!==t))return}function bI(e,t){return e.map((r,n)=>e[(t+n)%e.length])}function FI(e,t,r){const a=t.length>1&&Array.from(t).every(c=>c===t[0])?t[0]:t,s=r?e.indexOf(r):-1;let i=bI(e,Math.max(s,0));a.length===1&&(i=i.filter(c=>c!==r));const l=i.find(c=>c.toLowerCase().startsWith(a.toLowerCase()));return l!==r?l:void 0}function RI(e,t){const{x:r,y:n}=e;let a=!1;for(let s=0,i=t.length-1;s<t.length;i=s++){const o=t[s].x,l=t[s].y,c=t[i].x,f=t[i].y;l>n!=f>n&&r<(c-o)*(n-l)/(f-l)+o&&(a=!a)}return a}function PI(e,t){if(!t)return!1;const r={x:e.clientX,y:e.clientY};return RI(r,t)}function tc(e){return t=>t.pointerType==="mouse"?e(t):void 0}var OI=BT,DI=ux,II=$T,MI=HT,jI=px,LI=VT,BI=C0,UI=WT,$I=KT,HI=YT,VI=qT,zI=JT,WI=ZT,GI=t_,KI=n_,vx="DropdownMenu",[XI,lH]=yr(vx,[jT]),wr=jT(),[YI,s_]=XI(vx),i_=e=>{const{__scopeDropdownMenu:t,children:r,dir:n,open:a,defaultOpen:s,onOpenChange:i,modal:o=!0}=e,l=wr(t),c=y.useRef(null),[f=!1,d]=zn({prop:a,defaultProp:s,onChange:i});return u.jsx(YI,{scope:t,triggerId:en(),triggerRef:c,contentId:en(),open:f,onOpenChange:d,onOpenToggle:y.useCallback(()=>d(h=>!h),[d]),modal:o,children:u.jsx(OI,{...l,open:f,onOpenChange:d,dir:n,modal:o,children:r})})};i_.displayName=vx;var o_="DropdownMenuTrigger",l_=y.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,disabled:n=!1,...a}=e,s=s_(o_,r),i=wr(r);return u.jsx(DI,{asChild:!0,...i,children:u.jsx(Ee.button,{type:"button",id:s.triggerId,"aria-haspopup":"menu","aria-expanded":s.open,"aria-controls":s.open?s.contentId:void 0,"data-state":s.open?"open":"closed","data-disabled":n?"":void 0,disabled:n,...a,ref:i0(t,s.triggerRef),onPointerDown:de(e.onPointerDown,o=>{!n&&o.button===0&&o.ctrlKey===!1&&(s.onOpenToggle(),s.open||o.preventDefault())}),onKeyDown:de(e.onKeyDown,o=>{n||(["Enter"," "].includes(o.key)&&s.onOpenToggle(),o.key==="ArrowDown"&&s.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(o.key)&&o.preventDefault())})})})});l_.displayName=o_;var QI="DropdownMenuPortal",c_=e=>{const{__scopeDropdownMenu:t,...r}=e,n=wr(t);return u.jsx(II,{...n,...r})};c_.displayName=QI;var u_="DropdownMenuContent",f_=y.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=s_(u_,r),s=wr(r),i=y.useRef(!1);return u.jsx(MI,{id:a.contentId,"aria-labelledby":a.triggerId,...s,...n,ref:t,onCloseAutoFocus:de(e.onCloseAutoFocus,o=>{var l;i.current||(l=a.triggerRef.current)==null||l.focus(),i.current=!1,o.preventDefault()}),onInteractOutside:de(e.onInteractOutside,o=>{const l=o.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0,f=l.button===2||c;(!a.modal||f)&&(i.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});f_.displayName=u_;var qI="DropdownMenuGroup",JI=y.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=wr(r);return u.jsx(jI,{...a,...n,ref:t})});JI.displayName=qI;var ZI="DropdownMenuLabel",d_=y.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=wr(r);return u.jsx(LI,{...a,...n,ref:t})});d_.displayName=ZI;var e8="DropdownMenuItem",h_=y.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=wr(r);return u.jsx(BI,{...a,...n,ref:t})});h_.displayName=e8;var t8="DropdownMenuCheckboxItem",p_=y.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=wr(r);return u.jsx(UI,{...a,...n,ref:t})});p_.displayName=t8;var r8="DropdownMenuRadioGroup",n8=y.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=wr(r);return u.jsx($I,{...a,...n,ref:t})});n8.displayName=r8;var a8="DropdownMenuRadioItem",m_=y.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=wr(r);return u.jsx(HI,{...a,...n,ref:t})});m_.displayName=a8;var s8="DropdownMenuItemIndicator",x_=y.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=wr(r);return u.jsx(VI,{...a,...n,ref:t})});x_.displayName=s8;var i8="DropdownMenuSeparator",v_=y.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=wr(r);return u.jsx(zI,{...a,...n,ref:t})});v_.displayName=i8;var o8="DropdownMenuArrow",l8=y.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=wr(r);return u.jsx(WI,{...a,...n,ref:t})});l8.displayName=o8;var c8="DropdownMenuSubTrigger",g_=y.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=wr(r);return u.jsx(GI,{...a,...n,ref:t})});g_.displayName=c8;var u8="DropdownMenuSubContent",y_=y.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=wr(r);return u.jsx(KI,{...a,...n,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});y_.displayName=u8;var f8=i_,d8=l_,h8=c_,w_=f_,E_=d_,S_=h_,T_=p_,__=m_,k_=x_,C_=v_,A_=g_,N_=y_;const gx=f8,yx=d8,p8=y.forwardRef(({className:e,inset:t,children:r,...n},a)=>u.jsxs(A_,{ref:a,className:pe("flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",t&&"pl-8",e),...n,children:[r,u.jsx(ql,{className:"ml-auto"})]}));p8.displayName=A_.displayName;const m8=y.forwardRef(({className:e,...t},r)=>u.jsx(N_,{ref:r,className:pe("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",e),...t}));m8.displayName=N_.displayName;const A0=y.forwardRef(({className:e,sideOffset:t=4,...r},n)=>u.jsx(h8,{children:u.jsx(w_,{ref:n,sideOffset:t,className:pe("z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",e),...r})}));A0.displayName=w_.displayName;const rc=y.forwardRef(({className:e,inset:t,...r},n)=>u.jsx(S_,{ref:n,className:pe("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",t&&"pl-8",e),...r}));rc.displayName=S_.displayName;const x8=y.forwardRef(({className:e,children:t,checked:r,...n},a)=>u.jsxs(T_,{ref:a,className:pe("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:r,...n,children:[u.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:u.jsx(k_,{children:u.jsx(HE,{className:"h-4 w-4"})})}),t]}));x8.displayName=T_.displayName;const v8=y.forwardRef(({className:e,children:t,...r},n)=>u.jsxs(__,{ref:n,className:pe("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...r,children:[u.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:u.jsx(k_,{children:u.jsx(zE,{className:"h-2 w-2 fill-current"})})}),t]}));v8.displayName=__.displayName;const wx=y.forwardRef(({className:e,inset:t,...r},n)=>u.jsx(E_,{ref:n,className:pe("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...r}));wx.displayName=E_.displayName;const Ex=y.forwardRef(({className:e,...t},r)=>u.jsx(C_,{ref:r,className:pe("-mx-1 my-1 h-px bg-muted",e),...t}));Ex.displayName=C_.displayName;function g8({userRole:e="user",userName:t="User",onLogout:r}){const n=t.split(" ").map(a=>a[0]).join("").toUpperCase();return u.jsxs("header",{className:"h-16 border-b bg-card flex items-center justify-between px-6","data-testid":"header-main",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:"p-2 bg-primary rounded-md",children:u.jsx(oi,{className:"h-5 w-5 text-primary-foreground"})}),u.jsx("h1",{className:"text-xl font-semibold","data-testid":"text-app-title",children:"Voyager"})]}),u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"text-sm text-muted-foreground hidden sm:inline",children:"Status:"}),u.jsxs("div",{className:"flex items-center gap-1.5",children:[u.jsx("div",{className:"h-2 w-2 rounded-full bg-status-online"}),u.jsx("span",{className:"text-sm font-medium hidden sm:inline","data-testid":"text-connection-status",children:"Connected"})]})]}),u.jsxs(gx,{children:[u.jsx(yx,{asChild:!0,children:u.jsxs(_e,{variant:"ghost",className:"flex items-center gap-2 h-10","data-testid":"button-user-menu",children:[u.jsxs(NT,{className:"h-8 w-8",children:[u.jsx(bT,{src:""}),u.jsx(FT,{className:"text-xs",children:n})]}),u.jsxs("div",{className:"hidden md:flex flex-col items-start",children:[u.jsx("span",{className:"text-sm font-medium","data-testid":"text-username",children:t}),u.jsx(Nt,{variant:"secondary",className:"h-4 text-xs px-1.5","data-testid":"badge-user-role",children:e==="admin"?"Admin":"User"})]})]})}),u.jsxs(A0,{align:"end",className:"w-48",children:[u.jsx(wx,{children:"My Account"}),u.jsx(Ex,{}),u.jsxs(rc,{onClick:r,"data-testid":"button-logout",children:[u.jsx(GR,{className:"mr-2 h-4 w-4"}),u.jsx("span",{children:"Log out"})]})]})]})]})]})}const Ze=y.forwardRef(({className:e,...t},r)=>u.jsx("div",{ref:r,className:pe("shadcn-card rounded-xl border bg-card border-card-border text-card-foreground shadow-sm",e),...t}));Ze.displayName="Card";const Dt=y.forwardRef(({className:e,...t},r)=>u.jsx("div",{ref:r,className:pe("flex flex-col space-y-1.5 p-6",e),...t}));Dt.displayName="CardHeader";const It=y.forwardRef(({className:e,...t},r)=>u.jsx("div",{ref:r,className:pe("text-2xl font-semibold leading-none tracking-tight",e),...t}));It.displayName="CardTitle";const Br=y.forwardRef(({className:e,...t},r)=>u.jsx("div",{ref:r,className:pe("text-sm text-muted-foreground",e),...t}));Br.displayName="CardDescription";const et=y.forwardRef(({className:e,...t},r)=>u.jsx("div",{ref:r,className:pe("p-6 pt-0",e),...t}));et.displayName="CardContent";const y8=y.forwardRef(({className:e,...t},r)=>u.jsx("div",{ref:r,className:pe("flex items-center p-6 pt-0",e),...t}));y8.displayName="CardFooter";var w8="Label",b_=y.forwardRef((e,t)=>u.jsx(Ee.label,{...e,ref:t,onMouseDown:r=>{var a;r.target.closest("button, input, select, textarea")||((a=e.onMouseDown)==null||a.call(e,r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));b_.displayName=w8;var F_=b_;const E8=ii("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),qe=y.forwardRef(({className:e,...t},r)=>u.jsx(F_,{ref:r,className:pe(E8(),e),...t}));qe.displayName=F_.displayName;const S8="/assets/Data_visualization_login_background_22211783-3lAhJdIK.png";function T8(){const[e,t]=y.useState(""),[r,n]=y.useState(""),[a,s]=y.useState(!1),{toast:i}=Ea(),o=async l=>{l.preventDefault(),s(!0);try{await $t("/api/auth/login",{method:"POST",body:JSON.stringify({username:e,password:r})}),Cr.invalidateQueries({queryKey:["/api/auth/me"]})}catch(c){i({title:"Login Failed",description:c.message||"Invalid credentials",variant:"destructive"})}finally{s(!1)}};return u.jsxs("div",{className:"relative min-h-screen flex items-center justify-center overflow-hidden",children:[u.jsx("div",{className:"absolute inset-0 bg-cover bg-center",style:{backgroundImage:`url(${S8})`},children:u.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-background/95 via-background/90 to-background/80"})}),u.jsxs(Ze,{className:"relative w-full max-w-md mx-4 shadow-xl","data-testid":"card-login",children:[u.jsxs(Dt,{className:"space-y-4 text-center pb-4",children:[u.jsx("div",{className:"flex justify-center mb-2",children:u.jsx("div",{className:"p-3 bg-primary rounded-lg",children:u.jsx(oi,{className:"h-8 w-8 text-primary-foreground"})})}),u.jsx(It,{className:"text-3xl font-semibold",children:"Voyager"}),u.jsx(Br,{className:"text-base",children:"Secure AWS Athena Query Platform"})]}),u.jsx(et,{className:"pt-2",children:u.jsxs("form",{onSubmit:o,className:"space-y-4",children:[u.jsxs("div",{className:"space-y-2",children:[u.jsx(qe,{htmlFor:"username",children:"Username"}),u.jsx(vt,{id:"username",type:"text",placeholder:"Enter your username",value:e,onChange:l=>t(l.target.value),required:!0,"data-testid":"input-username",disabled:a})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsx(qe,{htmlFor:"password",children:"Password"}),u.jsx(vt,{id:"password",type:"password",placeholder:"Enter your password",value:r,onChange:l=>n(l.target.value),required:!0,"data-testid":"input-password",disabled:a})]}),u.jsx(_e,{type:"submit",className:"w-full",disabled:!e||!r||a,"data-testid":"button-login",children:a?"Signing in...":"Sign In"})]})})]})]})}const R_=y.forwardRef(({className:e,...t},r)=>u.jsx("textarea",{className:pe("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:r,...t}));R_.displayName="Textarea";var Sx="Collapsible",[_8,cH]=yr(Sx),[k8,Tx]=_8(Sx),P_=y.forwardRef((e,t)=>{const{__scopeCollapsible:r,open:n,defaultOpen:a,disabled:s,onOpenChange:i,...o}=e,[l=!1,c]=zn({prop:n,defaultProp:a,onChange:i});return u.jsx(k8,{scope:r,disabled:s,contentId:en(),open:l,onOpenToggle:y.useCallback(()=>c(f=>!f),[c]),children:u.jsx(Ee.div,{"data-state":kx(l),"data-disabled":s?"":void 0,...o,ref:t})})});P_.displayName=Sx;var O_="CollapsibleTrigger",D_=y.forwardRef((e,t)=>{const{__scopeCollapsible:r,...n}=e,a=Tx(O_,r);return u.jsx(Ee.button,{type:"button","aria-controls":a.contentId,"aria-expanded":a.open||!1,"data-state":kx(a.open),"data-disabled":a.disabled?"":void 0,disabled:a.disabled,...n,ref:t,onClick:de(e.onClick,a.onOpenToggle)})});D_.displayName=O_;var _x="CollapsibleContent",I_=y.forwardRef((e,t)=>{const{forceMount:r,...n}=e,a=Tx(_x,e.__scopeCollapsible);return u.jsx(Gt,{present:r||a.open,children:({present:s})=>u.jsx(C8,{...n,ref:t,present:s})})});I_.displayName=_x;var C8=y.forwardRef((e,t)=>{const{__scopeCollapsible:r,present:n,children:a,...s}=e,i=Tx(_x,r),[o,l]=y.useState(n),c=y.useRef(null),f=Oe(t,c),d=y.useRef(0),h=d.current,m=y.useRef(0),v=m.current,p=i.open||o,x=y.useRef(p),w=y.useRef(void 0);return y.useEffect(()=>{const E=requestAnimationFrame(()=>x.current=!1);return()=>cancelAnimationFrame(E)},[]),yt(()=>{const E=c.current;if(E){w.current=w.current||{transitionDuration:E.style.transitionDuration,animationName:E.style.animationName},E.style.transitionDuration="0s",E.style.animationName="none";const g=E.getBoundingClientRect();d.current=g.height,m.current=g.width,x.current||(E.style.transitionDuration=w.current.transitionDuration,E.style.animationName=w.current.animationName),l(n)}},[i.open,n]),u.jsx(Ee.div,{"data-state":kx(i.open),"data-disabled":i.disabled?"":void 0,id:i.contentId,hidden:!p,...s,ref:f,style:{"--radix-collapsible-content-height":h?`${h}px`:void 0,"--radix-collapsible-content-width":v?`${v}px`:void 0,...e.style},children:p&&a})});function kx(e){return e?"open":"closed"}var A8=P_;const nc=A8,ac=D_,sc=I_,N0=uT,b0=gD,N8=fT,M_=y.forwardRef(({className:e,...t},r)=>u.jsx(w0,{ref:r,className:pe("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));M_.displayName=w0.displayName;const Pc=y.forwardRef(({className:e,children:t,...r},n)=>u.jsxs(N8,{children:[u.jsx(M_,{}),u.jsxs(E0,{ref:n,className:pe("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...r,children:[t,u.jsxs(dT,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[u.jsx(Ao,{className:"h-4 w-4"}),u.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Pc.displayName=E0.displayName;const Oc=({className:e,...t})=>u.jsx("div",{className:pe("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});Oc.displayName="DialogHeader";const Cx=({className:e,...t})=>u.jsx("div",{className:pe("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});Cx.displayName="DialogFooter";const Dc=y.forwardRef(({className:e,...t},r)=>u.jsx(S0,{ref:r,className:pe("text-lg font-semibold leading-none tracking-tight",e),...t}));Dc.displayName=S0.displayName;const F0=y.forwardRef(({className:e,...t},r)=>u.jsx(T0,{ref:r,className:pe("text-sm text-muted-foreground",e),...t}));F0.displayName=T0.displayName;const b8=["SELECT","FROM","WHERE","AND","OR","NOT","IN","LIKE","BETWEEN","JOIN","LEFT","RIGHT","INNER","OUTER","ON","AS","ORDER","BY","GROUP","HAVING","LIMIT","OFFSET","DISTINCT","COUNT","SUM","AVG","MIN","MAX","CASE","WHEN","THEN","ELSE","END","NULL","IS","CREATE","INSERT","UPDATE","DELETE","DROP","ALTER","TABLE","UNION","ALL","EXISTS","TRUE","FALSE","ASC","DESC","WITH"];function F8({onExecute:e,onClear:t,connectionStatus:r="connected",suggestions:n=[],onTableUsed:a}){const[s,i]=y.useState(""),[o,l]=y.useState(!1),[c,f]=y.useState(!1),[d,h]=y.useState([]),[m,v]=y.useState(0),[p,x]=y.useState(0),[w,E]=y.useState(!1),[g,S]=y.useState(""),C=y.useRef(null),A=y.useRef(null),{toast:T}=Ea(),{data:O=[],isLoading:R}=ca({queryKey:["/api/saved-queries"]}),_=Un({mutationFn:async N=>$t("/api/saved-queries",{method:"POST",body:JSON.stringify(N)}),onSuccess:()=>{Cr.invalidateQueries({queryKey:["/api/saved-queries"]}),E(!1),S(""),T({title:"Query saved successfully"})},onError:N=>{T({title:"Failed to save query",description:N.message,variant:"destructive"})}}),F=Un({mutationFn:async N=>$t(`/api/saved-queries/${N}`,{method:"DELETE"}),onSuccess:()=>{Cr.invalidateQueries({queryKey:["/api/saved-queries"]}),T({title:"Query deleted"})},onError:N=>{T({title:"Failed to delete query",description:N.message,variant:"destructive"})}}),b=()=>{g.trim()&&s.trim()&&_.mutate({name:g.trim(),query:s.trim()})},W=N=>{i(N.query)},G=y.useCallback((N,z)=>{var we,I;const U=N.slice(0,z),V=N.slice(z),Z=U.match(/[\w.]*$/),J=V.match(/^[\w.]*/),oe=z-(((we=Z==null?void 0:Z[0])==null?void 0:we.length)||0),ie=z+(((I=J==null?void 0:J[0])==null?void 0:I.length)||0);return{word:N.slice(oe,ie),start:oe,end:ie}},[]),te=y.useCallback((N,z)=>{const{word:U}=G(N,z);if(U.length<1){f(!1);return}const V=U.toLowerCase(),Z=b8.filter(re=>re.toLowerCase().startsWith(V)).slice(0,5).map(re=>({label:re,type:"keyword"})),J=n.filter(re=>re.type==="table"&&re.label.toLowerCase().includes(V)).slice(0,10),oe=n.filter(re=>re.type==="column"&&re.label.toLowerCase().includes(V)).slice(0,10),ie=[...Z,...J,...oe];h(ie),v(0),f(ie.length>0)},[n,G]),ee=N=>{if(!c){N.key==="Enter"&&(N.ctrlKey||N.metaKey)&&(N.preventDefault(),ne());return}switch(N.key){case"ArrowDown":N.preventDefault(),v(z=>z<d.length-1?z+1:0);break;case"ArrowUp":N.preventDefault(),v(z=>z>0?z-1:d.length-1);break;case"Tab":case"Enter":d.length>0&&(N.preventDefault(),se(d[m]));break;case"Escape":f(!1);break}},se=N=>{const z=C.current;if(!z)return;const{start:U,end:V}=G(s,p);let Z=N.label;N.type==="table"&&(Z=`"dvsum-s3-glue-prod".${N.label}`,a==null||a(N.label));const J=s.slice(0,U)+Z+s.slice(V);i(J);const oe=U+Z.length;x(oe),setTimeout(()=>{z.focus(),z.setSelectionRange(oe,oe)},0),f(!1)},K=N=>{const z=N.target.value,U=N.target.selectionStart||0;i(z),x(U),te(z,U)},M=N=>{const z=N.target.selectionStart||0;x(z)},ne=()=>{s.trim()&&(console.log("Executing query:",s),e==null||e(s))},le=()=>{i(""),console.log("Query cleared"),t==null||t()};return y.useEffect(()=>{const N=z=>{A.current&&!A.current.contains(z.target)&&f(!1)};return document.addEventListener("mousedown",N),()=>document.removeEventListener("mousedown",N)},[]),u.jsxs(Ze,{"data-testid":"card-query-builder",children:[u.jsxs(Dt,{className:"flex flex-row items-center justify-between gap-2 space-y-0 pb-4",children:[u.jsxs("div",{children:[u.jsx(It,{className:"text-lg font-medium",children:"SQL Query Editor"}),u.jsx(Br,{className:"text-sm mt-1",children:"Write and execute SQL queries against AWS Athena"})]}),u.jsx(Nt,{variant:r==="connected"?"default":"destructive",className:"h-6","data-testid":"badge-connection-status",children:r==="connected"?"Connected":"Disconnected"})]}),u.jsxs(et,{className:"space-y-4",children:[u.jsxs(nc,{open:o,onOpenChange:l,children:[u.jsx(ac,{asChild:!0,children:u.jsxs(_e,{variant:"ghost",size:"sm",className:"mb-2 h-8","data-testid":"button-toggle-connection",children:[u.jsx(oi,{className:"h-3.5 w-3.5 mr-2"}),o?"Hide":"Show"," Connection Details"]})}),u.jsx(sc,{className:"space-y-2 pb-4",children:u.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm bg-muted/30 p-4 rounded-md",children:[u.jsxs("div",{children:[u.jsx("span",{className:"text-muted-foreground",children:"Region:"}),u.jsx("span",{className:"ml-2 font-mono","data-testid":"text-region",children:"us-east-1"})]}),u.jsxs("div",{children:[u.jsx("span",{className:"text-muted-foreground",children:"S3 Location:"}),u.jsx("span",{className:"ml-2 font-mono truncate block","data-testid":"text-s3-location",children:"s3://dvsum-staging-prod"})]})]})})]}),u.jsxs("div",{className:"relative",children:[u.jsx(R_,{ref:C,placeholder:"SELECT * FROM your_table LIMIT 100; (Ctrl+Enter to execute)",className:"min-h-64 font-mono text-sm resize-none",value:s,onChange:K,onClick:M,onKeyDown:ee,"data-testid":"input-sql-query"}),c&&d.length>0&&u.jsxs("div",{ref:A,className:"absolute z-50 mt-1 w-72 bg-popover border rounded-md shadow-lg overflow-hidden","data-testid":"suggestions-dropdown",children:[u.jsx("div",{className:"max-h-64 overflow-y-auto",children:d.map((N,z)=>u.jsxs("button",{className:`w-full px-3 py-2 text-left text-sm flex items-center gap-2 ${z===m?"bg-accent text-accent-foreground":"hover:bg-muted"}`,onClick:()=>se(N),"data-testid":`suggestion-${N.label}`,children:[N.type==="keyword"?u.jsx("span",{className:"text-purple-500 font-mono text-xs w-4",children:"SQL"}):N.type==="table"?u.jsx(XE,{className:"h-4 w-4 text-blue-500 flex-shrink-0"}):u.jsx(GE,{className:"h-4 w-4 text-orange-500 flex-shrink-0"}),u.jsx("span",{className:"truncate font-mono",children:N.label}),N.type==="column"&&"table"in N&&N.table&&u.jsx("span",{className:"ml-auto text-xs text-muted-foreground truncate",children:N.table})]},`${N.type}-${N.label}`))}),u.jsx("div",{className:"px-3 py-1.5 text-xs text-muted-foreground border-t bg-muted/30",children:"↑↓ navigate • Tab/Enter select • Esc close"})]})]}),u.jsxs("div",{className:"flex gap-2 justify-end flex-wrap",children:[u.jsxs(gx,{children:[u.jsx(yx,{asChild:!0,children:u.jsxs(_e,{variant:"outline","data-testid":"button-load-query",children:[u.jsx(vf,{className:"h-4 w-4 mr-2"}),"Load",O.length>0&&u.jsx(Nt,{variant:"secondary",className:"ml-2 h-5 text-xs",children:O.length})]})}),u.jsx(A0,{align:"end",className:"w-72",children:R?u.jsxs("div",{className:"flex items-center justify-center py-4 text-sm text-muted-foreground",children:[u.jsx(tr,{className:"h-4 w-4 animate-spin mr-2"}),"Loading..."]}):O.length===0?u.jsx("div",{className:"py-4 text-sm text-muted-foreground text-center",children:"No saved queries"}):O.map(N=>u.jsxs(rc,{className:"flex items-center justify-between gap-2",onSelect:()=>W(N),"data-testid":`menu-item-saved-query-${N.id}`,children:[u.jsx("span",{className:"truncate",children:N.name}),u.jsx(_e,{variant:"ghost",size:"icon",className:"h-6 w-6 flex-shrink-0",onClick:z=>{z.stopPropagation(),F.mutate(N.id)},"data-testid":`button-delete-query-${N.id}`,children:u.jsx(Ao,{className:"h-3 w-3"})})]},N.id))})]}),u.jsxs(N0,{open:w,onOpenChange:E,children:[u.jsx(b0,{asChild:!0,children:u.jsxs(_e,{variant:"outline",disabled:!s.trim(),"data-testid":"button-save-query",children:[u.jsx(rp,{className:"h-4 w-4 mr-2"}),"Save"]})}),u.jsxs(Pc,{children:[u.jsx(Oc,{children:u.jsx(Dc,{children:"Save Query"})}),u.jsxs("div",{className:"space-y-4 pt-4",children:[u.jsx(vt,{placeholder:"Query name",value:g,onChange:N=>S(N.target.value),"data-testid":"input-query-name"}),u.jsxs("div",{className:"flex justify-end gap-2",children:[u.jsx(_e,{variant:"outline",onClick:()=>E(!1),children:"Cancel"}),u.jsxs(_e,{onClick:b,disabled:!g.trim()||_.isPending,"data-testid":"button-confirm-save",children:[_.isPending?u.jsx(tr,{className:"h-4 w-4 animate-spin mr-2"}):u.jsx(rp,{className:"h-4 w-4 mr-2"}),"Save"]})]})]})]})]}),u.jsxs(_e,{variant:"outline",onClick:le,disabled:!s.trim(),"data-testid":"button-clear-query",children:[u.jsx(np,{className:"h-4 w-4 mr-2"}),"Clear"]}),u.jsxs(_e,{onClick:ne,disabled:!s.trim(),"data-testid":"button-execute-query",children:[u.jsx(XR,{className:"h-4 w-4 mr-2"}),"Execute Query"]})]})]})]})}const Do=y.forwardRef(({className:e,...t},r)=>u.jsx("div",{className:"relative w-full overflow-auto",children:u.jsx("table",{ref:r,className:pe("w-full caption-bottom text-sm",e),...t})}));Do.displayName="Table";const Io=y.forwardRef(({className:e,...t},r)=>u.jsx("thead",{ref:r,className:pe("[&_tr]:border-b",e),...t}));Io.displayName="TableHeader";const Mo=y.forwardRef(({className:e,...t},r)=>u.jsx("tbody",{ref:r,className:pe("[&_tr:last-child]:border-0",e),...t}));Mo.displayName="TableBody";const R8=y.forwardRef(({className:e,...t},r)=>u.jsx("tfoot",{ref:r,className:pe("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...t}));R8.displayName="TableFooter";const rn=y.forwardRef(({className:e,...t},r)=>u.jsx("tr",{ref:r,className:pe("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...t}));rn.displayName="TableRow";const Je=y.forwardRef(({className:e,...t},r)=>u.jsx("th",{ref:r,className:pe("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...t}));Je.displayName="TableHead";const Ge=y.forwardRef(({className:e,...t},r)=>u.jsx("td",{ref:r,className:pe("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...t}));Ge.displayName="TableCell";const P8=y.forwardRef(({className:e,...t},r)=>u.jsx("caption",{ref:r,className:pe("mt-4 text-sm text-muted-foreground",e),...t}));P8.displayName="TableCaption";function hp({columns:e=[],data:t=[],totalRows:r=0,rowLimit:n=1e3,executionTime:a=0}){const[s,i]=y.useState(1),o=10,l=Math.ceil(t.length/o),c=t.slice((s-1)*o,s*o),f=()=>{if(t.length===0)return;const d=e.join(","),h=t.map(w=>e.map(E=>{const g=w[E];if(g==null)return"";const S=String(g);return S.includes(",")||S.includes('"')||S.includes(`
bitnami@ip-172-26-10-121:/opt/bitnami/apache/htdocs/VoyagerAthena$
